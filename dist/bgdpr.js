/*! For license information please see bgdpr.js.LICENSE.txt */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){e.exports=n(3)},function(e,t,n){var i,r;!function(a){if(void 0===(r="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=r),!0,e.exports=a(),!!0){var o=window.Cookies,s=window.Cookies=a();s.noConflict=function(){return window.Cookies=o,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function r(){}function a(t,n,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},r.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in a)a[c]&&(s+="; "+c,!0!==a[c]&&(s+="="+a[c].split(";")[0]));return document.cookie=t+"="+n+s}}function o(e,n){if("undefined"!=typeof document){for(var r={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(i.read||i)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(r[u]=c,e===u)break}catch(e){}}return e?r[e]:r}}return r.set=a,r.get=function(e){return o(e,!1)},r.getJSON=function(e){return o(e,!0)},r.remove=function(t,n){a(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}((function(){}))}))},function(e,t,n){var i,r,a;a=function(){var e,t,n=document,i=n.getElementsByTagName("head")[0],r={},a={},o={},s={};function c(e,t){for(var n=0,i=e.length;n<i;++n)if(!t(e[n]))return!1;return 1}function u(e,t){c(e,(function(e){return t(e),1}))}function l(t,n,i){t=t.push?t:[t];var v=n&&n.call,h=v?n:i,d=v?t.join(""):n,g=t.length;function p(e){return e.call?e():r[e]}function y(){if(!--g)for(var e in r[d]=1,h&&h(),o)c(e.split("|"),p)&&!u(o[e],p)&&(o[e]=[])}return setTimeout((function(){u(t,(function t(n,i){return null===n?y():(i||/^https?:\/\//.test(n)||!e||(n=-1===n.indexOf(".js")?e+n+".js":e+n),s[n]?(d&&(a[d]=1),2==s[n]?y():setTimeout((function(){t(n,!0)}),0)):(s[n]=1,d&&(a[d]=1),void f(n,y)))}))}),0),l}function f(e,r){var a,o=n.createElement("script");o.onload=o.onerror=o.onreadystatechange=function(){o.readyState&&!/^c|loade/.test(o.readyState)||a||(o.onload=o.onreadystatechange=null,a=1,s[e]=2,r())},o.async=1,o.src=t?e+(-1===e.indexOf("?")?"?":"&")+t:e,i.insertBefore(o,i.lastChild)}return l.get=f,l.order=function(e,t,n){!function i(r){r=e.shift(),e.length?l(r,i):l(r,t,n)}()},l.path=function(t){e=t},l.urlArgs=function(e){t=e},l.ready=function(e,t,n){e=e.push?e:[e];var i,a=[];return!u(e,(function(e){r[e]||a.push(e)}))&&c(e,(function(e){return r[e]}))?t():(i=e.join("|"),o[i]=o[i]||[],o[i].push(t),n&&n(a)),l},l.done=function(e){l([null],e)},l},e.exports?e.exports=a():void 0===(r="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=r)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t);var r="bgdpr",a="data-bgdpr-",o=function(e,t){return(e=e.weight)>(t=t.weight)?1:e<t?-1:0},s=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];for(var a in e){var o=i(e[a]),s=i(t[a]);o!==s&&r.push({type:o,name:a,value:t[a],valueType:s})}if(r.length){if(n){var c="\r\n\t - ",u=c+r.map((function(e){return"waiting for ".concat(e.name," (").concat(e.type,") and got value ").concat(e.value," (").concat(e.valueType,") ")})).join(c);throw"The object ".concat(t," does not match interface ").concat(e,". Here are missing or bad typed properties : ").concat(u," \r\n Please check the doc to make your service valid")}return!1}return!0},c="group-list-has-changed",u="group-list-has-changed";function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=n(1),v=1,h=-1,d=0,g=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"getServiceStatus",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getData();return void 0!==n[e.id]?n[e.id]:t?(this.setServiceStatus(e,h),this.getServiceStatus(e,!1)):h}},{key:"setServiceStatus",value:function(e,t){var n=this.getData();n[e.id]=t,f.set(r,n)}},{key:"getData",value:function(){var e={};try{e=JSON.parse(f.get(r))}catch(e){}return e}}])&&l(t.prototype,n),i&&l(t,i),e}());function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t,this._name=n,this._description=i,this.services=[]}var t,n,i;return t=e,(n=[{key:"isMandatory",value:function(){return this.services.filter((function(e){return e.isMandatory()})).length===this.services.length}},{key:"addService",value:function(e){var t=this;return e&&(Array.isArray(e)?e.map((function(e){return t._doAddService(e)})):this._doAddService(e)),this}},{key:"getServicesList",value:function(){return this.services}},{key:"_doAddService",value:function(e){var t=be.getServiceManager().getServiceById(e.id);return t&&(this.services.push(t),this.services=this.services.sort((function(e,t){return o(e,t)})),be.trigger(u,{group:this})),this}},{key:"enableAll",value:function(){return be.getServiceManager().enableService(this.services),this}},{key:"disableAll",value:function(){return be.getServiceManager().disableService(this.services),this}},{key:"toggleAll",value:function(){return this.status!==v?this.enableAll():this.disableAll(),this}},{key:"setWeight",value:function(e){return this.weight=e,be.getGroupManager().getGroupById(this.id)&&be.trigger(u,{group:this}),this}},{key:"id",get:function(){return this._id},set:function(e){this._id=e,be.trigger(ServiceEvents.groupHasChanged,{group:this})}},{key:"name",get:function(){return this._name},set:function(e){this._name=e,be.trigger(u,{group:this})}},{key:"description",get:function(){return this._description},set:function(e){this._description=e,be.trigger(u,{group:this})}},{key:"status",get:function(){var e=this.services.length;return this.services.filter((function(e){return e.isEnabled()})).length===e?v:this.services.filter((function(e){return e.isDisabled()})).length===e?d:h}}])&&p(t.prototype,n),i&&p(t,i),e}(),b="needs-rebuild",m="has-rebuild",w="before-show-view",k="after-show-view",S="before-hide-view",M="after-hide-view";function T(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.groups=[]}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;be.on(c).subscribe((function(t,n){return e.sortGroups()})),be.on(u).subscribe((function(t,n){return e.sortGroups()}))}},{key:"createGroup",value:function(e,t,n){if(!this.getGroupById(e)){var i=new y(e,t,n);return i.weight=void 0!==i.weight?i.weight:this.groups.length,this.groups.push(i),this.sortGroups(),be.trigger(c,{groupManager:this}),i}if(this.logs)throw"Group ".concat(e," already exists");return!1}},{key:"getGroupsList",value:function(){return this.groups}},{key:"getGroupById",value:function(e){return this.groups.filter((function(t){return t.id===e}))[0]}},{key:"sortGroups",value:function(){return this.groups=this.groups.sort((function(e,t){return o(e,t)})),be.trigger(b,{type:"all"}),this}},{key:"getUnGroupedServices",value:function(){var e=[];this.groups.map((function(t){e=e.concat(t.getServicesList().map((function(e){return e.id})))}));try{e=T(new Set(e))}catch(t){e.filter((function(e,t,n){n.indexOf(e)}))}return be.getServiceManager().getServicesList().map((function(e){return e.id})).filter((function(t){return-1===e.indexOf(t)})).map((function(e){return be.getServiceManager().getServiceById(e)}))}}])&&L(t.prototype,n),i&&L(t,i),e}()),A="service-list-has-changed",D="service-has-changed",j="service-status-has-changed",P="service-start",C="service-stop";function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolvers=[],this.rejecters=[],t&&t(this.onResolve,this.onReject)}var t,n,i;return t=e,(n=[{key:"then",value:function(e){return this.resolvers.push(e),this}},{key:"subscribe",value:function(e){return this.then(e)}},{key:"catch",value:function(e){return this.rejecters.push(e),this}},{key:"callAll",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<e.length;r++)e[r].apply(e,n)}},{key:"onResolve",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callAll.apply(this,[this.resolvers].concat(t))}},{key:"onReject",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callAll.apply(this,[this.rejecters].concat(t))}}])&&_(t.prototype,n),i&&_(t,i),e}();function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enableCache=!0,this.tryRegionalisation=!1,this.setUserLanguage(),this.alreadyLoaded=[]}var t,n,i;return t=e,(n=[{key:"init",value:function(){}},{key:"hasToLoadTranslation",value:function(e){var t=this.getUserLanguage();return this.tryRegionalisation&&e!==t||!this.tryRegionalisation&&e.split("-")[0]!==t.split("-")[0]}},{key:"setDefaultLanguage",value:function(e){this.defaultLanguage=e}},{key:"allowTryRegionalisation",value:function(){return this.tryRegionalisation=!0,this}},{key:"setUserLanguage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.userLanguage=e||navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLang||null,this.translations=this.translations||{},this.translations[this.userLanguage]=this.translations[this.userLanguage]||{}}},{key:"getUserLanguage",value:function(){return this.userLanguage||this.setUserLanguage(),this.userLanguage}},{key:"addTranslation",value:function(e,t){if("string"==typeof t){if(t.indexOf("%")>-1)return this.loadFile(t),this;throw'The translation path does not have a "'.concat("%",'" to replace')}this._doAddTranslation(e,t,!0)}},{key:"loadUserLanguageData",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.addTranslation(this.languageBaseUrl)}},{key:"loadFile",value:function(e){var t=this.getUserLanguage();t=this.tryRegionalisation?t:t.split("-")[0];var n=e.split("%").join(t);if(!(this.alreadyLoaded.indexOf(n)>-1)){var i=this.getStoredTranslationByPath(n);i?this._doAddTranslation(n,i):this._doLoadFile(n,t)}}},{key:"_doLoadFile",value:function(e,t){var n=this,i=function(t){t.language.indexOf("-")>-1&&n.tryRegionalisation?n.loadFile(e):console.error("Cannot load translation file ".concat(t.path))},r=new XMLHttpRequest,a={path:e,language:t};r.onload=function(){r.status>=200&&r.status<300?(a.result=r.response,n.loadFileContent(a)):i(a)},r.onerror=function(){i(a)},r.open("get",a.path),r.send()}},{key:"loadFileContent",value:function(e){try{var t=JSON.parse(e.result);this.storeLanguage(e.path,t),this._doAddTranslation(e.path,t)}catch(t){console.error("translation file is not correct (".concat(e.path,")"))}}},{key:"_doAddTranslation",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._appendTranslation(this.getUserLanguage(),t,n),this.alreadyLoaded.push(e),this.onLoadString()}},{key:"_appendTranslation",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.translations[e]||(this.translations[e]=t),this.translations[e]=n?G({},this.translations[e],{},t):G({},t,{},this.translations[e])}},{key:"storeLanguage",value:function(e,t){if(this.enableCache){var n=this.getStoredLanguages();n&&(n[e]=t,localStorage.setItem(r+"l",JSON.stringify(n)))}}},{key:"getStoredLanguages",value:function(){if(void 0!==("undefined"==typeof localStorage?"undefined":I(localStorage))){var e={};try{e=JSON.parse(localStorage.getItem(r+"l"))}catch(e){}return e||{}}return null}},{key:"getStoredTranslationByPath",value:function(e){var t=this.getStoredLanguages();return!!t&&t[e]}},{key:"onLoadString",value:function(){var e=this.translations[this.getUserLanguage()];if(e)for(var t in e)this.replaceTranslationInDOM(t,e[t])}},{key:"replaceTranslationInDOM",value:function(e,t){var n=this;document.querySelectorAll("[".concat(a,'l="').concat(this.getTranslationId(e),'"]')).forEach((function(t){var i=null;try{i=JSON.parse(decodeURIComponent(t.getAttribute(a+"l-data")))}catch(e){i=null}t.innerHTML=n.translate(e,i)}))}},{key:"translate",value:function(e,t){var n=this.translations[this.getUserLanguage()][e]||e;return t&&Object.keys(t).map((function(e){n=n.split(e).join(t[e])})),n}},{key:"html",value:function(e,t){var n=encodeURIComponent(JSON.stringify(t));return"<span ".concat(a,'l="').concat(this.getTranslationId(e),'" ').concat(t?"".concat(a,'l-data="').concat(n,'"'):"",">").concat(this.translate(e,t),"</span>")}},{key:"getTranslationId",value:function(e){return e.replace(/(<([^>]+)>)/gi,"")}}])&&B(t.prototype,n),i&&B(t,i),e}()),q=function(e,t){return U.html(e,t)};function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var F=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.localManager=U,this.defaultLanguage="en",this.translations=this.getDefaultTranslations()}var t,n,i;return t=e,(n=[{key:"initTranslations",value:function(){var e=this;return this.getTranslations().map((function(t,n){var i="".concat(e.id,"-").concat(n);"string"==typeof t?e.localManager.hasToLoadTranslation(e.getDefaultLanguage())&&e.localManager.addTranslation(i,t):e.localManager.addTranslation(i,t)})),this}},{key:"setDefaultLanguage",value:function(e){return this.defaultLanguage=e,this}},{key:"getDefaultLanguage",value:function(){return this.defaultLanguage}},{key:"getDefaultTranslations",value:function(){return[]}},{key:"getTranslations",value:function(){return this.translations}},{key:"setTranslations",value:function(e){return this.translations=e,this}},{key:"addTranslation",value:function(e){return this.translations.push(e),this.initTranslations(),this}}])&&N(t.prototype,n),i&&N(t,i),e}();function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function z(e,t,n){return(z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Z(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function W(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(o,e);var t,n,i,r,a=(t=o,function(){var e,n=Z(t);if(X()){var i=Z(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return W(this,e)});function o(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(i=a.call(this,e))._id=e,i._name=t,i._description=n,i}return n=o,(i=[{key:"init",value:function(){return z(Z(o.prototype),"initTranslations",this).call(this),this}},{key:"getCookiePatterns",value:function(){return[]}},{key:"getLocalStoragePatterns",value:function(){return[]}},{key:"getRelatedScripts",value:function(){return[]}},{key:"getRelatedCss",value:function(){return[]}},{key:"onEnable",value:function(){}},{key:"onDisable",value:function(){}},{key:"start",value:function(){be.logsAreEnabled()&&console.log("Start ".concat(this.name," (").concat(this.id,")"))}},{key:"stop",value:function(){be.logsAreEnabled()&&console.log("Stop ".concat(this.name," (").concat(this.id,")"))}},{key:"isMandatory",value:function(){return!1}},{key:"isEnabled",value:function(){return this.status===v}},{key:"isDisabled",value:function(){return this.status===d}},{key:"isPending",value:function(){return this.status===h}},{key:"setWeight",value:function(e){return this.weight=e,be.getServiceManager().getServiceById(this.id)&&be.trigger(A,{serviceManager:be.getServiceManager()}),this}},{key:"id",get:function(){return this._id},set:function(e){this._id=e,be.trigger(D,{service:this})}},{key:"name",get:function(){return this._name},set:function(e){this._name=e,be.trigger(D,{service:this})}},{key:"description",get:function(){return this._description},set:function(e){this._description=e,be.trigger(D,{service:this})}},{key:"status",get:function(){return g.getServiceStatus(this)}}])&&J(n.prototype,i),r&&J(n,r),o}(F);function Q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;be.on(j).subscribe((function(t){t.data&&t.data.services&&t.data.services.map((function(t){return e.initServiceDOM(t)}))})),window.addEventListener("DOMContentLoaded",(function(){return e.onDomLoaded()}))}},{key:"initServiceDOM",value:function(e){var t=this,n="[".concat(a,'visible-if-enabled="').concat(e.id,'"]'),i="[".concat(a,'hidden-if-enabled="').concat(e.id,'"]');e.isEnabled()?(document.querySelectorAll(n).forEach((function(e){return t.showElement(e)})),document.querySelectorAll(i).forEach((function(e){return t.hideElement(e)}))):(document.querySelectorAll(n).forEach((function(e){return t.hideElement(e)})),document.querySelectorAll(i).forEach((function(e){return t.showElement(e)})))}},{key:"onDomLoaded",value:function(){var e=this,t="".concat(a,"visible-if-enabled");document.querySelectorAll("[".concat(t,"]")).forEach((function(n){var i=e.getServiceFromElement(n,t);e.initDOMItem(n,i,e.showElement,e.hideElement)}));var n="".concat(a,"hidden-if-enabled");document.querySelectorAll("[".concat(n,"]")).forEach((function(t){var i=e.getServiceFromElement(t,n);e.initDefaultPlacehoder(t,i),e.initDOMItem(t,i,e.hideElement,e.showElement)}))}},{key:"initDOMItem",value:function(e,t,n,i){t&&t.isEnabled()?n(e):i(e)}},{key:"getServiceFromElement",value:function(e,t){return be.getServiceById(e.getAttribute(t))}},{key:"initDefaultPlacehoder",value:function(e,t){if(0==e.innerHTML.trim().length)try{var n=be.getTemplate().initDefaultPlaceholder(e,t);n&&(e.innerHTML=n)}catch(e){}}},{key:"hideElement",value:function(e){e.outerHTML=e.outerHTML.replace(/div/g,"noscript")}},{key:"showElement",value:function(e){e.outerHTML=e.outerHTML.replace(/noscript/g,"div").replace(/&lt;/g,"<").replace(/&gt;/g,">")}}])&&Q(t.prototype,n),i&&Q(t,i),e}();function ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var te={id:"id",name:"Name",description:"description",start:function(){}},ne=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services=[],this.servicePlaceholder=new Y}var t,n,i;return t=e,(n=[{key:"getServicesList",value:function(){return this.services}},{key:"getEnabledServicesList",value:function(){return this.services.filter((function(e){return e.isEnabled()}))}},{key:"getDisabledServicesList",value:function(){return this.services.filter((function(e){return e.isDisabled()}))}},{key:"getPendingServices",value:function(){return this.services.filter((function(e){return e.isPending()}))}},{key:"getMandatoryServicesList",value:function(){return this.services.filter((function(e){return e.isMandatory()}))}},{key:"init",value:function(){var e=this;this.servicePlaceholder.init(),be.on(A).subscribe((function(t){return e.sortServices()}))}},{key:"createService",value:function(e){var t=e;if(!this.isService(e)&&!(t=this.overrideService(e)))return null;if(this.getServiceById(t.id))throw"Service ".concat(id," already exists");return t.weight=void 0!==e.weight?t.weight:this.services.length,t.init(),this.services.push(t),t.isEnabled()&&this.startService(t),be.trigger(A,{services:this.services}),t}},{key:"overrideService",value:function(e){var t=null;if(s(te,e,be.logsAreEnabled())){for(var n in t=new K,e)t[n]=e[n];Object.getOwnPropertyNames(Object.getPrototypeOf(e)).indexOf("start")>-1&&(Object.getOwnPropertyNames(Object.getPrototypeOf(e)).map((function(n){t[n]=e[n]})),"function"==typeof e.getDefaultTranslations&&t.setTranslations(e.getDefaultTranslations()))}return t}},{key:"getServiceById",value:function(e){return this.services.filter((function(t){return t.id===e}))[0]}},{key:"sortServices",value:function(){return this.services.length>1&&(this.services=this.services.sort((function(e,t){return o(e,t)}))),this}},{key:"isService",value:function(e){return e instanceof K}},{key:"enableAll",value:function(){this.enableService(this.services)}},{key:"enableService",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Array.isArray(e)){var i=e.filter((function(e){return!e.isEnabled()}));i.length&&(i.map((function(e){t.enableService(e,!1)})),be.trigger(j,{services:i}))}else e&&!e.isEnabled()&&(g.setServiceStatus(e,v),e.onEnable(),this.startService(e),n&&be.trigger(j,{services:[e]}))}},{key:"startService",value:function(e){e.isRuning||(e.isRuning=!0,e.getRelatedScripts().map((function(e){if("string"==typeof e)be.addScript(e);else try{e.path&&be.addScript(e.path,e.callback)}catch(e){console.error(e)}})),e.start(),be.trigger(P,{service:e}))}},{key:"disableAll",value:function(){this.disableService(this.services)}},{key:"disableService",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Array.isArray(e)){var i=e.filter((function(e){return!e.isDisabled()}));i.length>0&&(i.forEach((function(e){t.disableService(e,!1)})),be.trigger(j,{services:i}))}else if(e){var r=e.isEnabled();!r&&!e.isPending()||e.isMandatory()||(e.isEnabled()&&(this.stopService(e),e.onDisable()),g.setServiceStatus(e,d),n&&be.trigger(j,{services:[e]}))}}},{key:"stopService",value:function(e){e.isRuning&&(e.isRuning=!1,e.stop(),this.deleteCookies(e),this.deleteLocalStorage(e),e.getRelatedScripts().map((function(e){"string"==typeof e?be.removeScript(e):e.path&&be.removeScript(e.path)})),be.trigger(C,{service:e}))}},{key:"deleteCookies",value:function(e){var t=this;try{var n=Object.keys(f.get()),i=e.getCookiePatterns();n.length&&i.length&&n.filter((function(e){return t.filterFromPatterns(e,i)})).map((function(e){return f.remove(e)}))}catch(e){}}},{key:"deleteLocalStorage",value:function(e){var t=this;if(window.localStorage)try{var n=Object.keys(window.localStorage),i=e.getLocalStoragePatterns();n.length&&i.length&&n.filter((function(e){return t.filterFromPatterns(e,i)})).map((function(e){window.localStorage.removeItem(e)}))}catch(e){}}},{key:"filterFromPatterns",value:function(e,t){for(var n in t)if(e.match(t[n]))return!0;return!1}},{key:"toggleService",value:function(e){e.isEnabled()?this.disableService(e):this.enableService(e)}}])&&ee(t.prototype,n),i&&ee(t,i),e}());function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ae(e,t,n){return(ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function oe(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(c,e);var t,n,i,o,s=(t=c,function(){var e,n=ce(t);if(se()){var i=ce(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return oe(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).css=t.getDefaultCssList(),t}return n=c,(i=[{key:"initTemplate",value:function(){ae(ce(c.prototype),"initTranslations",this).call(this),this.getCssList().map((function(e){return be.addCss(e)}))}},{key:"getDefaultCssList",value:function(){return[]}},{key:"getCssList",value:function(){return this.css}},{key:"setCssList",value:function(e){return this.css=e,this}},{key:"wrapper",value:function(e){return'\n        <div class="'.concat(r,'-view-wrapper">\n            <div class="').concat(r,'-view">\n                <span class="').concat(r,'-view-hide" ').concat(a,'view-hide>close</span>\n                <div class="').concat(r,'-view-content">\n                    ').concat(e,"\n                </div>\n            </div>\n        </div>")}},{key:"getNoServiceMarkup",value:function(){var e='\n            <div class="'.concat(r,'-view-main">\n                <div class="title">').concat(this.html("Vos données personnelles"),'</div>\n                <div class="').concat(r,'-view-head">\n                    ').concat(this.html("Ce site ne déclare pas de services qui pourraient recquérir et exploiter des données personnelles."),"\n                </div>\n            </div>");return this.wrapper(e)}},{key:"getContent",value:function(e){return'\n        <div class="'.concat(r,'-view-main">\n            <div class="title">').concat(q("Vos données personnelles"),'</div>\n            <div class="').concat(r,'-view-head">        \n                ').concat(q("Ce site utilise des services pour améliorer votre expérience utilisateur et vous proposer certains contenus externes. \n                Certains de ces services peuvent recquérir et exploiter des données personnelles. \n                Vous pouvez gérer leur activation via ce panneau accessible à tout moment.<br/>Vous pouvez également accéder et gérer en détail l'ensemble des services que le site propose."),'\n            </div>\n\n            <div class="').concat(r,'-view-quick">\n                <button ').concat(a,'all-enable="accept_all">').concat(q("Tout accepter"),"</button>\n                <button ").concat(a,'all-disable="deny_all">').concat(q("Tout refuser"),"</button>\n                <button ").concat(a,"view-toggle-detail>").concat(q("Voir le détail"),'</button>\n            </div>\n        </div>\n        <div class="').concat(r,'-view-detail">\n            ').concat(e,"\n        </div>")}},{key:"getViewMarkup",value:function(e){var t="";switch(e.type){case"groups":t=e.groups.join("");break;case"services":t=e.services.join("")}return this.wrapper(this.getContent(t))}},{key:"getServiceMarkup",value:function(e){return'\n            <div class="'.concat(r,'-view-service line"  ').concat(a,'service="').concat(e.id,'" ').concat(a,'status="').concat(e.status,'">\n                <div>\n                    <div class="').concat(r,'-view-service-name">').concat(q(e.name),'</div>\n                    <div class="').concat(r,'-view-service-description">').concat(q(e.description),'</div>\n                </div>\n                <div>\n                    <button data-bgdpr-service-toggle="').concat(e.id,'">\n                        <span class="enable">').concat(q("Activer"),'</span>\n                        <span class="disable">').concat(q("Désactiver"),"</span>\n                    </button>  \n                </div>\n            </div>\n        ")}},{key:"getGroupMarkup",value:function(e,t){return'\n        <div class="'.concat(r,'-view-group">\n            <div class="').concat(r,'-view-group-head line" ').concat(a,'group="').concat(e.id,'" ').concat(a,'status="').concat(e.status,'">\n                <div>\n                    <div class="').concat(r,'-view-group-name">').concat(e.name," ").concat(e.isMandatory()?"<span class='mandatory'>".concat(q("(nécessaire au fonctionnement du site)"),"</span>"):"",'</div>\n                    <div class="').concat(r,'-view-group-description">').concat(e.description,'</div>\n                    <div class="').concat(r,'-view-group-detail">\n                        <a class="more" href="Javascript:void();" data-bgdpr-group-toggle-detail="').concat(e.id,'">Detail</a>  \n                    </div>\n                </div>\n                <div class="').concat(r,'-view-group-quick question">\n                    <button data-bgdpr-group-toggle="').concat(e.id,'">\n                        <span class="enable">').concat(q("Tout activer"),'</span>\n                        <span class="disable">').concat(q("Tout désactiver"),'</span>\n                    </button>\n                </div>\n            </div>\n\n            <div class="').concat(r,'-view-group-services">\n                ').concat(t.join(""),"\n            </div>\n        </div>\n        ")}},{key:"html",value:function(e,t){return q(e,t)}},{key:"getUngroupedTitle",value:function(){return q("Autre")}},{key:"getShowPromise",value:function(){}},{key:"getHidePromise",value:function(){}},{key:"getParentElement",value:function(){return this.parent||(this.parent=document.querySelector("body")),this.parent}}])&&re(n.prototype,i),o&&re(n,o),c}(F);function fe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ve={init:function(){}},he=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeoutValue=200,this.rebuildTimeout=null,this.needsRebuild("all")}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;if(!this.template)throw"".concat(r," :  No template defined");return be.on(b).subscribe((function(t){e.needsRebuild(t.data?t.data.type:"all",t.data?t.data.data:{})})),be.on(D).subscribe((function(t){return e.needsRebuild("service",t.data)})),be.on(A).subscribe((function(t){return e.needsRebuild("all",{})})),be.on(u).subscribe((function(t){return e.needsRebuild("group",t.data)})),be.on(c).subscribe((function(t){return e.needsRebuild("all",{})})),this.initTemplate(),this}},{key:"needsRebuild",value:function(e,t){var n=this;switch(this._needsRebuildData=this._needsRebuildData||[],e){case"all":this.hasToRebuildAll()||(this._needsRebuildData=[{type:"all"}]);break;case"group":this.hasToRebuildGroup(t.group)&&this._needsRebuildData.push({type:"group",element:t.group});break;case"service":this.hasToRebuildService(t.service)&&this._needsRebuildData.push({type:"service",element:t.service})}return window.clearTimeout(this.rebuildTimeout),this.rebuildTimeout=window.setTimeout((function(){return n.rebuild()}),this.timeoutValue),this}},{key:"hasToRebuildAll",value:function(){return this._needsRebuildData&&this._needsRebuildData.filter((function(e){return"all"===e.type})).length>0}},{key:"hasToRebuildGroup",value:function(e){return!this.hasToRebuildAll()}},{key:"hasToRebuildService",value:function(e){return!this.hasToRebuildAll()}},{key:"getTemplate",value:function(){return this.template}},{key:"setTemplate",value:function(e){var t=e;return this.isTemplate(e)||(t=this.overrideTemplate(e,be.logsAreEnabled()))?(this.template=t,this.view=null,this):(be.logsAreEnabled()&&console.error("Bad template"),this)}},{key:"initTemplate",value:function(){return this.template&&(this.template.initTemplate(),this.template.init(),be.trigger(b,{type:"all"})),this}},{key:"overrideTemplate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;if(s(ve,e,t)){for(var i in n=new le,e)n[i]=e[i];Object.getOwnPropertyNames(Object.getPrototypeOf(e)).indexOf("init")>-1&&(Object.getOwnPropertyNames(Object.getPrototypeOf(e)).map((function(t){n[t]=e[t]})),"function"==typeof e.getDefaultTranslations&&n.setTranslations(e.getDefaultTranslations()),"function"==typeof e.getDefaultCssList&&n.setCssList(e.getDefaultCssList()))}return n}},{key:"isTemplate",value:function(e){return e instanceof le}},{key:"rebuild",value:function(){var e=this;return this._needsRebuildData&&this.view&&(this.hasToRebuildAll()?be.getServiceManager().getServicesList().length?this.view.innerHTML=this.getViewMarkup():this.view.innerHTML=this.template.getNoServiceMarkup():this._needsRebuildData.map((function(t){var n="";switch(t.type){case"service":n=e.template.getServiceMarkup(t.element);break;case"group":n=e.template.getGroupMarkup(t.element,e.getServicesMarkupList(t.element.getServicesList()))}var i="[".concat(a,"view-").concat(t.type,'="').concat(t.element.id,'"]');e.view.querySelectorAll(i).forEach((function(e){e.innerHTML=n}))})),be.trigger(m),this._needsRebuildData=null),this}},{key:"getViewElement",value:function(){return this.view||(this.view=document.createElement("div"),this.view.setAttribute(a+"view",""),this.view.classList.add(this.getTemplate().id),this.rebuild()),this.view}},{key:"getViewMarkup",value:function(){var e=this.getContentMarkupFromData(this.getViewData());return this.template.getViewMarkup(e)}},{key:"getViewData",value:function(){var e={},t=be.getGroupManager(),n=be.getServiceManager(),i=t.getGroupsList();return i.length&&(e.type="group",e.data={},e.data.groups=i,e.data.ungrouped_services=t.getUnGroupedServices(),e.data.ungrouped_services.length!==n.getServicesList().length)||(e.type="services",e.data={},e.data.services=be.getServiceManager().getServicesList()),e}},{key:"getContentMarkupFromData",value:function(e){var t="";switch(e.type){case"group":t=this.getContentForGroupedView(e.data);break;case"services":t=this.getContentForServicesView(e.data);break;default:t=""}return t}},{key:"getContentForGroupedView",value:function(e){var t=this,n={type:"groups",groups:[]};return e.groups.map((function(e){n.groups.push(t.getGroupMarkup(e))})),e.ungrouped_services.length&&n.groups.push(this.getUngroupedMarkup(e.ungrouped_services)),n}},{key:"getContentForServicesView",value:function(e){return{type:"services",services:this.getServicesMarkupList(e.services)}}},{key:"getServicesMarkupList",value:function(e){var t=this;return e.map((function(e){return"<div ".concat(a,'view-service="').concat(e.id,'">').concat(t.template.getServiceMarkup(e),"</div>")}))}},{key:"getUngroupedMarkup",value:function(e){var t=be.createGroup("default",this.template.getUngroupedTitle(),"");return e.map((function(e){return t.addService(e)})),this.getGroupMarkup(t,this.getServicesMarkupList(e))}},{key:"getGroupMarkup",value:function(e){var t=e.getServicesList();if(t.length){var n=this.getServicesMarkupList(t);return"<div ".concat(a,'view-group="').concat(e.id,'">').concat(this.template.getGroupMarkup(e,n),"</div>")}return""}}])&&fe(t.prototype,n),i&&fe(t,i),e}());function de(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ge=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=he}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.view.init(),this.actions||(this.initBehaviors(),this.initActions())}},{key:"initActions",value:function(){var e=this;this.addAction("all-enable",(function(){be.getServiceManager().enableAll(),e.hide()})),this.addAction("all-disable",(function(){be.getServiceManager().disableAll(),e.hide()})),this.addAction("view-toggle-detail",(function(){return e.toggleDetailPanel()})),this.addAction("view-hide",(function(){return e.hide()})),this.addAction("view-show",(function(){return e.show()})),this.addAction("group-toggle-detail",(function(t){e.view.view.querySelector("[".concat(a,'view-group="').concat(t.elemId,'"]')).classList.toggle(r+"-detail")})),this.addAction("group-toggle",(function(e){e.group.toggleAll()})),this.addAction("service-enable",(function(e){be.getServiceManager().enableService(e.service)})),this.addAction("service-disable",(function(e){be.getServiceManager().disableService(e.service)})),this.addAction("service-toggle",(function(e){be.getServiceManager().toggleService(e.service)}))}},{key:"getView",value:function(){return this.view}},{key:"isDisplayed",value:function(){return document.querySelector("[".concat(a,"view]"))}},{key:"show",value:function(){var e=this;if(!this.isDisplayed()){this.parentElement.appendChild(this.view.getViewElement()),be.trigger(w,{});try{this.getView().getTemplate().getShowPromise().then((function(){e._doShow()}))}catch(e){this._doShow()}}}},{key:"_doShow",value:function(){this.parentElement.classList.add(r+"-on"),be.trigger(k,{})}},{key:"hide",value:function(){var e=this;if(this.isDisplayed()){be.testMode||(be.getServiceManager().enableService(be.getServiceManager().getMandatoryServicesList()),be.getServiceManager().disableService(be.getServiceManager().getPendingServices())),be.trigger(S,{}),this.parentElement.classList.remove(r+"-on"),this.parentElement.classList.remove(r+"-detail"),this.parentElement.querySelectorAll(".bgdpr-detail").forEach((function(e){e.classList.remove(r+"-detail")}));try{this.getView().getTemplate().getHidePromise().then((function(){e._doHide()}))}catch(e){this._doHide()}}}},{key:"_doHide",value:function(){try{this.parentElement.removeChild(this.view.getViewElement())}catch(e){}be.trigger(M,{})}},{key:"addAction",value:function(e,t){this.actions=this.actions||[],this.actions[e]=this.actions[e]||[],this.actions[e].push(t)}},{key:"initBehaviors",value:function(e,t){var n=this;t=function(i){n.initEventOnItem(i.target,e,t)},document.removeEventListener("click",t),document.addEventListener("click",t)}},{key:"initEventOnItem",value:function(e,t,n){for(var i,r=!1,o=0,s=e.attributes,c=s?s.length:0;o<c;o++)if(0===(i=s[o]).nodeName.indexOf(a)){var u=i.nodeName.split("-"),l=u.slice(2).join("-");switch(u[2]){case"service":var f=be.getServiceManager().getServiceById(i.nodeValue);this.callAction(l,{service:f,elemId:i.nodeValue}),r=!0;break;case"group":var v=be.getGroupManager().getGroupById(i.nodeValue);this.callAction(l,{group:v,elemId:i.nodeValue}),r=!0;break;case"view":case"all":this.callAction(l,{}),r=!0}}e.parentNode&&!r&&this.initEventOnItem(e.parentNode,t,n)}},{key:"callAction",value:function(e,t){this.actions=this.actions||[],this.actions[e]=this.actions[e]||[],this.actions[e].map((function(e){e(t)}))}},{key:"toggleDetailPanel",value:function(){this.parentElement.classList.toggle(r+"-detail")}},{key:"detailPanelIsOpen",value:function(){return this.parentElement.classList.contains(r+"-detail")}},{key:"initDomData",value:function(){window.setTimeout((function(){document.querySelectorAll("[".concat(a,"service][").concat(a,"status]")).forEach((function(e){var t=be.getServiceManager().getServiceById(e.getAttribute(a+"service"));t&&e.setAttribute("".concat(a,"status"),t.status)})),document.querySelectorAll("[".concat(a,"group][").concat(a,"status]")).forEach((function(e){var t=be.getGroupManager().getGroupById(e.getAttribute(a+"group"));t&&e.setAttribute("".concat(a,"status"),t.status)}))}),10)}},{key:"parentElement",get:function(){return this.getView().getTemplate().getParentElement()}}])&&de(t.prototype,n),i&&de(t,i),e}());function pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ye=n(2),be=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logs=!1,this.testMode=!1,this.autoShow=!0,this.observables=[],this.viewManager=ge,this.serviceManager=ne,this.groupManager=E,this.localManager=U,this.autoShowCallback=function(){(t.testMode||t.serviceManager.getPendingServices().length)&&t.showView()}}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;return this.serviceManager.init(),this.groupManager.init(),this.viewManager.init(),this.localManager.init(),this.getServiceManager().getEnabledServicesList().map((function(t){e.getServiceManager().startService(t)})),this.autoShow&&(window.removeEventListener("DOMContentLoaded",this.autoShowCallback),window.addEventListener("DOMContentLoaded",this.autoShowCallback)),this.on(j).subscribe((function(t){return e.initDomData()})),this}},{key:"allowTryRegionalisation",value:function(){return this.localManager.allowTryRegionalisation(),this}},{key:"disableLogs",value:function(){return this.logs=!1,this}},{key:"logsAreEnabled",value:function(){return this.logs}},{key:"getServiceManager",value:function(){return this.serviceManager}},{key:"getServiceById",value:function(e){return this.getServiceManager().getServiceById(e)}},{key:"getGroupManager",value:function(){return this.groupManager}},{key:"getGroupById",value:function(e){return this.getGroupManager().getGroupById(e)}},{key:"getViewManager",value:function(){return this.viewManager}},{key:"getLocalManager",value:function(){return this.localManager}},{key:"disableAutoShow",value:function(){return this.autoShow=!1,window.removeEventListener("DOMContentLoaded",this.autoShowCallback),this}},{key:"trigger",value:function(e,t){return this.logs&&console.log("Trigger ".concat(e),t),this._observableIsDefined(e)&&this.observables[e].onResolve({name:e,data:t}),this}},{key:"on",value:function(e){return this._observableIsDefined(e)||(this.observables[e]=new R),this.observables[e]}},{key:"_observableIsDefined",value:function(e){return this.observables&&this.observables[e]&&"function"==typeof this.observables[e].onResolve}},{key:"createService",value:function(e){return this.serviceManager.createService(e)}},{key:"addService",value:function(e){return this.serviceManager.createService(e),this}},{key:"createGroup",value:function(e,t,n){return this.groupManager.createGroup(e,t,n)}},{key:"showView",value:function(){return this.viewManager.show(),this}},{key:"hideView",value:function(){return this.viewManager.hide(),this}},{key:"setTemplate",value:function(e){return this.viewManager.getView().setTemplate(e),this}},{key:"createTemplate",value:function(e){return this.viewManager.getView().setTemplate(e),this.getTemplate()}},{key:"getTemplate",value:function(){return this.viewManager.getView().getTemplate()}},{key:"addScript",value:function(e,t){return ye(e,t),this}},{key:"removeScript",value:function(e){return document.querySelectorAll('script[src="'+e+'"]').forEach((function(e){return e.parentNode.removeChild(e)})),this}},{key:"addCss",value:function(e,t){var n=document.querySelector("head"),i=document.createElement("link");return i.rel="stylesheet",i.type="text/css",i.href=e,i.media=t||"all",n.appendChild(i),this}},{key:"removeCss",value:function(e){return document.querySelectorAll('link[href="'+e+'"]').forEach((function(e){return e.parentNode.removeChild(e)})),this}},{key:"initDomData",value:function(){return this.viewManager.initDomData(),this}},{key:"addTranslation",value:function(e){return this.localManager.addTranslation("global",e),this}}])&&pe(t.prototype,n),i&&pe(t,i),e}());t.default=be;if(window[r]){var me=window[r];for(var we in window[r]=be,me)window[r][we]=me[we]}else window[r]=be}]);