/*! For license information please see egdpr.js.LICENSE.txt */
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){e.exports=n(3)},function(e,t,n){var r,i;!function(o){if(void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),!0,e.exports=o(),!!0){var s=window.Cookies,a=window.Cookies=o();a.noConflict=function(){return window.Cookies=s,a}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,!0!==o[c]&&(a+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(i[u]=c,e===u)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))},function(e,t,n){var r,i,o;o=function(){var e,t,n=document,r=n.getElementsByTagName("head")[0],i={},o={},s={},a={};function c(e,t){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return 1}function u(e,t){c(e,(function(e){return t(e),1}))}function l(t,n,r){t=t.push?t:[t];var v=n&&n.call,d=v?n:r,h=v?t.join(""):n,p=t.length;function g(e){return e.call?e():i[e]}function y(){if(!--p)for(var e in i[h]=1,d&&d(),s)c(e.split("|"),g)&&!u(s[e],g)&&(s[e]=[])}return setTimeout((function(){u(t,(function t(n,r){return null===n?y():(r||/^https?:\/\//.test(n)||!e||(n=-1===n.indexOf(".js")?e+n+".js":e+n),a[n]?(h&&(o[h]=1),2==a[n]?y():setTimeout((function(){t(n,!0)}),0)):(a[n]=1,h&&(o[h]=1),void f(n,y)))}))}),0),l}function f(e,i){var o,s=n.createElement("script");s.onload=s.onerror=s.onreadystatechange=function(){s.readyState&&!/^c|loade/.test(s.readyState)||o||(s.onload=s.onreadystatechange=null,o=1,a[e]=2,i())},s.async=1,s.src=t?e+(-1===e.indexOf("?")?"?":"&")+t:e,r.insertBefore(s,r.lastChild)}return l.get=f,l.order=function(e,t,n){!function r(i){i=e.shift(),e.length?l(i,r):l(i,t,n)}()},l.path=function(t){e=t},l.urlArgs=function(e){t=e},l.ready=function(e,t,n){e=e.push?e:[e];var r,o=[];return!u(e,(function(e){i[e]||o.push(e)}))&&c(e,(function(e){return i[e]}))?t():(r=e.join("|"),s[r]=s[r]||[],s[r].push(t),n&&n(o)),l},l.done=function(e){l([null],e)},l},e.exports?e.exports=o():void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"eGDPR",(function(){return qe})),n.d(t,"eGDPRService",(function(){return Ne}));var i="egdpr",o="data-egdpr-",s="https://cdn.jsdelivr.net/gh/tsecher/easy-gdpr@develop/",a=function(e,t){return(e=e.weight)>(t=t.weight)?1:e<t?-1:0},c=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[];for(var o in e){var s=r(e[o]),a=r(t[o]);s!==a&&i.push({type:s,name:o,value:t[o],valueType:a})}if(i.length){if(n){var c="\r\n\t - ",u=c+i.map((function(e){return"waiting for ".concat(e.name," (").concat(e.type,") and got value ").concat(e.value," (").concat(e.valueType,") ")})).join(c);throw"The object ".concat(t," does not match interface ").concat(e,". Here are missing or bad typed properties : ").concat(u," \r\n Please check the doc to make your service valid")}return!1}return!0},u="group-list-has-changed",l="group-list-has-changed";function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=n(1),d=1,h=-1,p=0,g=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getServiceStatus",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getData();return void 0!==n[e.id]?n[e.id]:t?(this.setServiceStatus(e,h),this.getServiceStatus(e,!1)):h}},{key:"setServiceStatus",value:function(e,t){var n=this.getData();n[e.id]=t,v.set(i,n)}},{key:"getData",value:function(){var e={};try{e=JSON.parse(v.get(i))}catch(e){}return e}}])&&f(t.prototype,n),r&&f(t,r),e}());function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t,this._name=n,this._description=r,this.services=[]}var t,n,r;return t=e,(n=[{key:"isMandatory",value:function(){return this.services.filter((function(e){return e.isMandatory()})).length===this.services.length}},{key:"addService",value:function(e){var t=this;return e&&(Array.isArray(e)?e.map((function(e){return t._doAddService(e)})):this._doAddService(e)),this}},{key:"getServicesList",value:function(){return this.services}},{key:"_doAddService",value:function(e){var t=He.getServiceManager().getServiceById(e.id);return t&&(this.services.push(t),this.services=this.services.sort((function(e,t){return a(e,t)})),He.trigger(l,{group:this})),this}},{key:"enableAll",value:function(){return He.getServiceManager().enableService(this.services),this}},{key:"disableAll",value:function(){return He.getServiceManager().disableService(this.services),this}},{key:"toggleAll",value:function(){return this.status!==d?this.enableAll():this.disableAll(),this}},{key:"setWeight",value:function(e){return this.weight=e,He.getGroupManager().getGroupById(this.id)&&He.trigger(l,{group:this}),this}},{key:"id",get:function(){return this._id},set:function(e){this._id=e,He.trigger(ServiceEvents.groupHasChanged,{group:this})}},{key:"name",get:function(){return this._name},set:function(e){this._name=e,He.trigger(l,{group:this})}},{key:"description",get:function(){return this._description},set:function(e){this._description=e,He.trigger(l,{group:this})}},{key:"status",get:function(){var e=this.services.length;return this.services.filter((function(e){return e.isEnabled()})).length===e?d:this.services.filter((function(e){return e.isDisabled()})).length===e?p:h}}])&&y(t.prototype,n),r&&y(t,r),e}(),w="needs-rebuild",m="has-rebuild",S="show-view",k="hide-view";function _(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.groups=[]}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this;He.on(u).subscribe((function(t,n){return e.sortGroups()})),He.on(l).subscribe((function(t,n){return e.sortGroups()}))}},{key:"createGroup",value:function(e,t,n){if(!this.getGroupById(e)){var r=new b(e,t,n);return r.weight=void 0!==r.weight?r.weight:this.groups.length,this.groups.push(r),this.sortGroups(),He.trigger(u,{groupManager:this}),r}if(this.logs)throw"Group ".concat(e," already exists");return!1}},{key:"getGroupsList",value:function(){return this.groups}},{key:"getGroupById",value:function(e){return this.groups.filter((function(t){return t.id===e}))[0]}},{key:"sortGroups",value:function(){return this.groups=this.groups.sort((function(e,t){return a(e,t)})),He.trigger(w),this}},{key:"getUnGroupedServices",value:function(){var e=[];return this.groups.map((function(t){e=e.concat(t.getServicesList().map((function(e){return e.id})))})),e=_(new Set(e)),He.getServiceManager().getServicesList().map((function(e){return e.id})).filter((function(t){return-1===e.indexOf(t)})).map((function(e){return He.getServiceManager().getServiceById(e)}))}}])&&T(t.prototype,n),r&&T(t,r),e}()),E="service-list-has-changed",P="service-has-changed",j="service-status-has-changed",x="service-start",D="service-stop";function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enableCache=!0,this.tryRegionalisation=!1;var t=this.getUserLanguage();this.translations={},this.translations[t]={},this.alreadyLoaded=[]}var t,n,r;return t=e,(n=[{key:"init",value:function(){}},{key:"hasToLoadTranslation",value:function(e){var t=this.getUserLanguage();return this.tryRegionalisation&&e!==t||!this.tryRegionalisation&&e.split("-")[0]!==t.split("-")[0]}},{key:"setDefaultLanguage",value:function(e){this.defaultLanguage=e}},{key:"allowTryRegionalisation",value:function(){return this.tryRegionalisation=!0,this}},{key:"getUserLanguage",value:function(){return this.userLanguage||(this.userLanguage=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLang||null),this.userLanguage}},{key:"addTranslation",value:function(e,t){if("string"==typeof t){if(t.indexOf("%")>-1)return this.loadFile(t),this;throw'The translation path does not have a "'.concat("%",'" to replace')}this._doAddTranslation(e,t,!0)}},{key:"loadUserLanguageData",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.addTranslation(this.languageBaseUrl)}},{key:"loadFile",value:function(e){var t=this.getUserLanguage();t=this.tryRegionalisation?t:t.split("-")[0];var n=e.split("%").join(t);if(!(this.alreadyLoaded.indexOf(n)>-1)){var r=this.getStoredTranslationByPath(n);r?this._doAddTranslation(n,r):this._doLoadFile(n,t)}}},{key:"_doLoadFile",value:function(e,t){var n=this;this.loadTranslationFile(e,t).then((function(e){n.loadFileContent(e)})).catch((function(t){t.language.indexOf("-")>-1&&n.tryRegionalisation?n.loadFile(e):function(e){console.error("Cannot load translation file ".concat(e.path))}(t)}))}},{key:"loadFileContent",value:function(e){try{var t=JSON.parse(e.result);this.storeLanguage(e.path,t),this._doAddTranslation(e.path,t)}catch(t){console.error("translation file is not correct (".concat(e.path,")"))}}},{key:"_doAddTranslation",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._appendTranslation(this.getUserLanguage(),t,n),this.alreadyLoaded.push(e),this.onLoadString()}},{key:"_appendTranslation",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.translations[e]||(this.translations[e]=t),this.translations[e]=n?C({},this.translations[e],{},t):C({},t,{},this.translations[e])}},{key:"storeLanguage",value:function(e,t){if(this.enableCache){var n=this.getStoredLanguages();n&&(n[e]=t,localStorage.setItem(i+"l",JSON.stringify(n)))}}},{key:"getStoredLanguages",value:function(){if(void 0!==("undefined"==typeof localStorage?"undefined":L(localStorage))){var e={};try{e=JSON.parse(localStorage.getItem(i+"l"))}catch(e){}return e||{}}return null}},{key:"getStoredTranslationByPath",value:function(e){var t=this.getStoredLanguages();return!!t&&t[e]}},{key:"loadTranslationFile",value:function(e,t){return new Promise((function(n,r){var i=new XMLHttpRequest,o={path:e,language:t};i.onload=function(){i.status>=200&&i.status<300?(o.result=i.response,n(o)):r(o)},i.onerror=function(){r(o)},i.open("get",o.path),i.send()}))}},{key:"onLoadString",value:function(){var e=this;document.querySelectorAll("[".concat(o,"l]")).forEach((function(t){var n=null;try{n=JSON.parse(decodeURIComponent(t.getAttribute(o+"l-data")))}catch(e){n=null}t.innerHTML=e.translate(t.getAttribute(o+"l"),n)}))}},{key:"translate",value:function(e,t){var n=this.translations[this.getUserLanguage()][e]||e;return t&&Object.keys(t).map((function(e){n=n.split(e).join(t[e])})),n}},{key:"html",value:function(e,t){return"<span ".concat(o,'l="').concat(e,'" ').concat(o,'l-data="').concat(encodeURIComponent(JSON.stringify(t)),'">').concat(this.translate(e,t),"</span>")}}])&&V(t.prototype,n),r&&V(t,r),e}()),I=function(e,t){return G.html(e,t)};function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.localManager=G,this.defaultLanguage="fr",this.translations=this.getDefaultTranslations()}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this;return this.getTranslations().map((function(t,n){var r="".concat(e.id,"-").concat(n);"string"==typeof t?e.localManager.hasToLoadTranslation(e.getDefaultLanguage())&&e.localManager.addTranslation(r,t):e.localManager.addTranslation(r,t)})),this}},{key:"setDefaultLanguage",value:function(e){return this.defaultLanguage=e,this}},{key:"getDefaultLanguage",value:function(){return this.defaultLanguage}},{key:"getDefaultTranslations",value:function(){return[]}},{key:"getTranslations",value:function(){return this.translations}},{key:"setTranslations",value:function(e){return this.translations=e,this}},{key:"addTranslation",value:function(e){return this.translations.push(e),this}}])&&z(t.prototype,n),r&&z(t,r),e}();function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(s,e);var t,n,r,i,o=(t=s,function(){var e,n=F(t);if(N()){var r=F(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return q(this,e)});function s(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=o.call(this,e))._id=e,r._name=t,r._description=n,r}return n=s,(r=[{key:"getCookiePatterns",value:function(){return[]}},{key:"getRelatedScripts",value:function(){return[]}},{key:"getRelatedCss",value:function(){return[]}},{key:"onEnable",value:function(){}},{key:"onDisable",value:function(){}},{key:"start",value:function(){console.log("Start ".concat(this.name," (").concat(this.id,")"))}},{key:"stop",value:function(){console.log("Stop ".concat(this.name," (").concat(this.id,")"))}},{key:"isMandatory",value:function(){return!1}},{key:"isEnabled",value:function(){return this.status===d}},{key:"isDisabled",value:function(){return this.status===p}},{key:"isPending",value:function(){return this.status===h}},{key:"setWeight",value:function(e){return this.weight=e,He.getServiceManager().getServiceById(this.id)&&He.trigger(E,{serviceManager:He.getServiceManager()}),this}},{key:"id",get:function(){return this._id},set:function(e){this._id=e,He.trigger(P,{service:this})}},{key:"name",get:function(){return this._name},set:function(e){this._name=e,He.trigger(P,{service:this})}},{key:"description",get:function(){return this._description},set:function(e){this._description=e,He.trigger(P,{service:this})}},{key:"status",get:function(){return g.getServiceStatus(this)}}])&&H(n.prototype,r),i&&H(n,i),s}(U);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var X={id:"id",name:"Name",description:"description",start:function(){}},Z=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services=[]}var t,n,r;return t=e,(n=[{key:"getServicesList",value:function(){return this.services}},{key:"getEnabledServicesList",value:function(){return this.services.filter((function(e){return e.isEnabled()}))}},{key:"getDisabledServicesList",value:function(){return this.services.filter((function(e){return e.isDisabled()}))}},{key:"getPendingServices",value:function(){return this.services.filter((function(e){return e.isPending()}))}},{key:"getMandatoryServicesList",value:function(){return this.services.filter((function(e){return e.isMandatory()}))}},{key:"init",value:function(){var e=this;He.on(E).subscribe((function(t,n){return e.sortServices()}))}},{key:"createService",value:function(e){var t=e;if(!this.isService(e)&&!(t=this.overrideService(e)))return null;if(this.getServiceById(t.id))throw"Service ".concat(id," already exists");return t.weight=void 0!==e.weight?t.weight:this.services.length,t.init(),this.services.push(t),!t.isEnabled()&&t.isMandatory()&&this.enableService(t),t.isEnabled()&&this.startService(t),He.trigger(E,{services:this.services}),t}},{key:"overrideService",value:function(e){var t=null;if(c(X,e,He.logsAreEnabled())){for(var n in t=new Y,e)t[n]=e[n];Object.getOwnPropertyNames(Object.getPrototypeOf(e)).indexOf("start")>-1&&(Object.getOwnPropertyNames(Object.getPrototypeOf(e)).map((function(n){t[n]=e[n]})),"function"==typeof e.getDefaultTranslations&&t.setTranslations(e.getDefaultTranslations()))}return t}},{key:"getServiceById",value:function(e){return this.services.filter((function(t){return t.id===e}))[0]}},{key:"sortServices",value:function(){return this.services.length>1&&(this.services=this.services.sort((function(e,t){return a(e,t)}))),this}},{key:"isService",value:function(e){return e instanceof Y}},{key:"enableAll",value:function(){this.enableService(this.services)}},{key:"enableService",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Array.isArray(e)?(e.map((function(e){t.enableService(e,!1)})),He.trigger(j,{service:e})):e.isEnabled()||(g.setServiceStatus(e,d),e.onEnable(),this.startService(e),n&&He.trigger(j,{service:e}))}},{key:"startService",value:function(e){e.getRelatedScripts().map((function(e){if("string"==typeof e)He.addScript(e);else try{e.path&&He.addScript(e.path,e.callback)}catch(e){console.error(e)}})),e.start(),He.trigger(x,{service:e})}},{key:"disableAll",value:function(){this.disableService(this.services)}},{key:"disableService",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Array.isArray(e))e.map((function(e){t.disableService(e,!1)})),He.trigger(j,{service:e});else{var r=e.isEnabled();!r&&!e.isPending()||e.isMandatory()||(e.isEnabled()&&(this.stopService(e),e.onDisable()),g.setServiceStatus(e,p),n&&He.trigger(j,{service:e}))}}},{key:"stopService",value:function(e){e.stop();try{var t=Object.keys(v.get()),n=e.getCookiePatterns();t.length&&n.length&&t.filter((function(e){for(var t in n)if(e.match(n[t]))return!0;return!1})).map((function(e){v.remove(e)}))}catch(e){}e.getRelatedScripts().map((function(e){"string"==typeof e?He.removeScript(e):e.path&&He.removeScript(e.path)})),He.trigger(D,{service:e})}},{key:"toggleService",value:function(e){e.isEnabled()?this.disableService(e):this.enableService(e)}}])&&W(t.prototype,n),r&&W(t,r),e}());function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ne(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ee(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(u,e);var t,n,r,a,c=(t=u,function(){var e,n=ce(t);if(ae()){var r=ce(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return se(this,e)});function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),e=c.call(this,"default-template");try{e.persistentButton()}catch(t){document.addEventListener("DOMContentLoaded",(function(){return e.persistentButton()}))}return e}return n=u,(r=[{key:"persistentButton",value:function(){var e=document.createElement("div");e.innerHTML=I("Vos données personnelles"),e.classList.add("".concat(i,"-persistent")),e.setAttribute("".concat(o,"view-show"),""),e.innerHTML='<svg class="'.concat(i,'-persistent-logo" viewBox="0 0 100 100" x="0" y="0" xmlns="http://www.w3.org/2000/svg">\n            <g stroke="null" transform="rotate(-151.4181365966797 48.95931625366211,49.56866073608398) " id="svg_21">\n                <path stroke="null" d="m48.17258,38.18804c0.49484,-0.53886 0.49484,-1.34714 0,-1.886c-0.49483,-0.53885 -1.23709,-0.53885 -1.73193,0c-0.49483,0.53886 -0.49483,1.34714 0,1.886c0.49484,0.53885 1.23709,0.53885 1.73193,0z" id="svg_5"/>\n                <path stroke="null" d="m69.05544,29.92053c0.49483,-0.53886 0.49483,-1.34714 0,-1.886c-0.49484,-0.53886 -1.23709,-0.53886 -1.73193,0c-0.49484,0.53885 -0.49484,1.34714 0,1.886c0.49483,0.53886 1.23709,0.53886 1.73193,0z" id="svg_6"/>\n                <path stroke="null" d="m58.51677,52.40708c-0.49483,0.53885 -0.49483,1.34714 0,1.886c0.49484,0.53885 1.23709,0.53885 1.73193,0c0.49483,-0.53886 0.49483,-1.34714 0,-1.886c-0.49484,-0.40414 -1.3608,-0.40414 -1.73193,0z" id="svg_7"/>\n                <path stroke="null" d="m77.59722,53.5927c0.49483,-0.53885 0.49483,-1.48185 0,-1.886c-0.49484,-0.53885 -1.23709,-0.53885 -1.73193,0c-0.49484,0.53886 -0.49484,1.34714 0,1.886c0.49483,0.53886 1.3608,0.53886 1.73193,0z" id="svg_8"/>\n                <path stroke="null" d="m57.17749,63.97774c-0.49484,0.53885 -0.49484,1.34714 0,1.886c0.49483,0.53886 1.23709,0.53886 1.73193,0c0.49484,-0.53886 0.49484,-1.34714 0,-1.886c-0.49484,-0.53886 -1.23709,-0.53886 -1.73193,0z" id="svg_9"/>\n                <path stroke="null" d="m44.60901,68.26883c-0.49483,0.53885 -0.49483,1.34714 0,1.886c0.49484,0.53886 1.23709,0.53886 1.73193,0c0.49484,-0.53886 0.49484,-1.34714 0,-1.886c-0.37113,-0.53886 -1.23709,-0.53886 -1.73193,0z" id="svg_10"/>\n                <path stroke="null" d="m31.80418,76.47433c2.84531,0 5.19579,-2.55957 5.19579,-5.658s-2.35047,-5.65799 -5.19579,-5.65799c-2.84531,0 -5.19578,2.55957 -5.19578,5.65799s2.35047,5.658 5.19578,5.658zm0,-8.6217c1.48451,0 2.7216,1.34714 2.7216,2.96371s-1.23709,2.96371 -2.7216,2.96371s-2.7216,-1.34714 -2.7216,-2.96371s1.23709,-2.96371 2.7216,-2.96371z" id="svg_22"/>\n                <path stroke="null" d="m71.81582,49.07742c2.84531,0 5.19579,-2.55957 5.19579,-5.65799s-2.35047,-5.658 -5.19579,-5.658c-2.84531,0 -5.19578,2.55957 -5.19578,5.658s2.35047,5.65799 5.19578,5.65799zm0,-8.6217c1.48451,0 2.7216,1.34714 2.7216,2.96371s-1.23709,2.96371 -2.7216,2.96371s-2.7216,-1.34714 -2.7216,-2.96371s1.23709,-2.96371 2.7216,-2.96371z" id="svg_11"/>\n                <path stroke="null" d="m53.31081,21.66073c0,3.09843 2.35047,5.658 5.19578,5.658s5.19579,-2.55957 5.19579,-5.658s-2.35047,-5.65799 -5.19579,-5.65799s-5.19578,2.55957 -5.19578,5.65799zm5.19578,-2.96371c1.48451,0 2.7216,1.34714 2.7216,2.96371s-1.23709,2.96371 -2.7216,2.96371s-2.7216,-1.34714 -2.7216,-2.96371s1.23709,-2.96371 2.7216,-2.96371z" id="svg_12"/>\n                <path stroke="null" d="m49.84111,57.09662c2.96902,0 5.3195,-2.55957 5.19579,-6.06214c0,0 0,0 0,0c0,0 0,0 0,-0.13471c-0.49484,-7.13985 -10.39158,-6.60099 -10.39158,0.53885c0,3.09843 2.35047,5.658 5.19579,5.658zm0,-2.69428c-1.48451,0 -2.7216,-1.34714 -2.7216,-2.96371c0,-1.21243 0.61855,-2.15542 1.60822,-2.69428c1.73193,-0.80829 3.71128,0.13471 3.83499,2.42486c0.12371,1.886 -1.23709,3.23314 -2.7216,3.23314z" id="svg_13"/>\n                <path stroke="null" d="m24.13545,68.42032c2.47418,-1.61657 3.34015,-4.98442 1.85564,-7.67871c-1.48451,-2.69428 -4.57724,-3.63728 -7.05143,-2.02071c-2.47418,1.61657 -3.34015,4.98442 -1.85564,7.67871c1.3608,2.69429 4.45353,3.63728 7.05142,2.02071zm-3.95869,-7.40928c1.3608,-0.80829 2.96902,-0.40414 3.71128,1.07771c0.74226,1.48186 0.24742,3.23314 -0.98967,4.04143c-1.23709,0.80829 -2.96902,0.26943 -3.71128,-1.07771c-0.86596,-1.48186 -0.37113,-3.23314 0.98967,-4.04143z" id="svg_23"/>\n                <path stroke="null" d="m31.41029,47.62506c2.47418,-1.61657 3.34015,-4.98442 1.85564,-7.67871c-1.48451,-2.69428 -4.57724,-3.63728 -7.05142,-2.02071c-2.47419,1.61657 -3.34015,4.98442 -1.85564,7.67871c1.3608,2.69428 4.45353,3.63728 7.05142,2.02071zm-3.95869,-7.40928c1.3608,-0.80829 2.96902,-0.26943 3.71128,1.07771c0.74226,1.48186 0.24742,3.23314 -0.98968,4.04143c-1.23709,0.80828 -2.96902,0.26943 -3.71127,-1.07772c-0.86596,-1.48186 -0.37113,-3.23314 0.98967,-4.04142z" id="svg_14"/>\n                <path stroke="null" d="m48.24245,27.65353c0.37113,0 0.61854,-0.13471 0.86596,-0.40414c0.24742,-0.26943 0.37113,-0.53885 0.37113,-0.943c0,-0.40414 -0.12371,-0.67357 -0.37113,-0.943c-0.49484,-0.53886 -1.23709,-0.53886 -1.73193,0c-0.24742,0.26943 -0.37113,0.53886 -0.37113,0.943c0,0.40414 0.12371,0.67357 0.37113,0.943c0.24742,0.26943 0.49484,0.40414 0.86597,0.40414z" id="svg_15"/>\n                <path stroke="null" d="m35.10988,56.00984c-0.49483,0.53885 -0.49483,1.34714 0,1.886c0.49484,0.53885 1.23709,0.53885 1.73193,0c0.49484,-0.53886 0.49484,-1.34714 0,-1.886c-0.37113,-0.53886 -1.23709,-0.53886 -1.73193,0z" id="svg_16"/>\n                <path stroke="null" d="m27.89135,53.23581c0.49484,-0.53886 0.49484,-1.34714 0,-1.886c-0.49483,-0.53886 -1.23709,-0.53886 -1.73193,0c-0.49484,0.53885 -0.49484,1.34714 0,1.886c0.49484,0.53886 1.23709,0.53886 1.73193,0z" id="svg_17"/>\n                <path stroke="null" d="m34.07281,27.94731c-7.5095,1.81759 -13.8534,6.67305 -17.95237,13.71924c-4.2973,7.38714 -7.55788,16.34439 -5.44803,24.81721c2.10985,8.47282 9.47479,15.90324 16.66775,19.92341c0.41823,0.28936 0.93024,0.16543 1.23314,-0.10317c1.92193,-1.53929 4.41587,-2.04528 6.66692,-1.12542c0.48435,0.17571 0.99636,0.05178 1.32692,-0.51646c1.59747,-2.24193 4.08064,-3.23354 6.66225,-2.88193c2.58162,0.35161 4.71122,1.98439 5.86604,4.53663c0.46746,0.96097 1.63449,0.97144 2.16338,0.06226c1.52058,-2.61391 4.20208,-3.94646 7.02048,-3.74981c1.65137,0.18618 5.97023,-6.22971 7.1218,-8.46136c12.62961,-3.05686 21.94792,-12.2058 22.48867,-26.49543c0.32876,-8.37953 -4.58345,-20.56865 -9.90371,-26.79973c-5.21569,-6.15874 -10.2822,-8.38894 -17.97782,-8.77217c-10.37101,-0.32156 -20.46967,5.44269 -25.93543,15.84674zm24.00958,51.99551c-2.88451,-0.08301 -5.67057,1.1772 -7.54327,3.38811c-1.56226,-2.35597 -4.03321,-3.90613 -6.7855,-4.21644c-3.13207,-0.41368 -6.19336,0.81551 -8.30285,3.18137c-2.55395,-0.65125 -5.32312,-0.1763 -7.52028,1.33196c-6.22426,-3.66875 -12.88497,-10.29317 -14.80259,-17.83604c-1.99451,-7.91486 1.11696,-15.85955 5.14981,-22.79209c7.80125,-13.4105 27.07321,-16.78112 39.30651,-8.31741c14.78114,10.38585 13.43498,32.85291 0.49817,45.26054zm18.33386,-57.12778c4.75901,5.68339 9.45133,17.24221 9.13946,24.83648c-0.4132,12.30583 -8.0187,19.7708 -18.5787,23.3032c5.45642,-13.91707 3.99209,-30.04038 -8.13666,-38.43176c-5.54158,-3.83399 -15.01778,-5.95901 -21.48636,-5.17453c5.13987,-8.07931 13.58105,-12.75886 22.71892,-12.33412c7.0406,0.24883 11.51821,2.23098 16.34334,7.80073z" id="svg_18"/>\n            </g>\n      </svg>'),document.querySelector("body").append(e)}},{key:"getDefaultCssList",value:function(){return[s+"src/templates/default/css/default-template.css"]}},{key:"getDefaultTranslations",value:function(){return[s+"src/templates/default/translations/".concat("%",".json")]}},{key:"getShowPromise",value:function(){return new Promise((function(e){window.setTimeout((function(){e()}),100)}))}},{key:"getHidePromise",value:function(){return new Promise((function(e){window.setTimeout((function(){e()}),300)}))}},{key:"wrapper",value:function(e){return"\n        <style>.".concat(i,'-view{ opacity:0} </style>\n        <div class="').concat(i,'-view-overlay">\n            <div class="').concat(i,'-view-wrapper">\n                <div class="').concat(i,'-view">\n                    <svg class="').concat(i,'-view-hide" ').concat(o,'view-hide viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n                        <g>\n                            <rect transform="rotate(135 50,50.45312118530273) " id="svg_2" height="8" width="70" y="46.45312" x="15" stroke-width="1.5" fill="#000"/>\n                            <rect transform="rotate(45 50.00000000000001,50.453125) " id="svg_1" height="8" width="70" y="46.45313" x="15" stroke-width="1.5" fill="#000"/>\n                        </g>\n                    </svg>\n                    <div class="').concat(i,'-view-content">\n                        ').concat(e,"\n                    </div>\n                </div>\n            </div>\n        </div>")}},{key:"getContent",value:function(e){return'\n        <div class="'.concat(i,'-view-main">\n            <div class="title">').concat(I("Vos données personnelles"),'</div>\n            <div class="').concat(i,'-view-head">        \n                ').concat(I("Ce site utilise des services pour améliorer votre expérience utilisateur et vous proposer certains contenus externes. \n                Certains de ces services peuvent recquérir et exploiter des données personnelles. \n                Vous pouvez gérer leur activation via ce panneau accessible à tout moment.<br/>Vous pouvez également accéder et gérer en détail l'ensemble des services que le site propose."),'\n            </div>\n\n            <div class="').concat(i,'-view-quick">\n                <button ').concat(o,'all-enable="accept_all">\n                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n                    <g id="valid">\n                        <rect transform="rotate(135 60.709205627441406,52.107933044433594) " id="svg_2" height="8" width="70" y="48.10793" x="25.70921" stroke-width="1.5" fill="#000"/>\n                        <rect stroke="null" transform="rotate(45 30.14121246337889,65.61316680908203) " id="svg_1" height="8" width="31.10913" y="61.61317" x="14.58665" stroke-width="1.5" fill="#000"/>\n                    </g>\n                </svg>\n                    ').concat(I("Tout accepter"),"\n                </button>\n                <button ").concat(o,'all-disable="deny_all">').concat(I("Tout refuser"),"</button>\n                <button ").concat(o,"view-toggle-detail>").concat(I("Voir le détail"),'</button>\n            </div>\n        </div>\n        <div class="').concat(i,'-view-detail">\n            ').concat(e,"\n        </div>")}},{key:"getServiceMarkup",value:function(e){return'\n            <div class="'.concat(i,"-view-service line ").concat(e.isMandatory()?"mandatory":"",'" ').concat(o,'service="').concat(e.id,'" ').concat(o,'status="').concat(e.status,'">\n                <div class="line-accept" ').concat(o,'service-toggle="').concat(e.id,'">\n                    <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n                        <use xlink:href="#valid"></use>\n                    </svg>\n                </div>\n                <div class="line-content">\n                    <div class="').concat(i,'-view-service-name">').concat(I(e.name)).concat(this.getMandatoryText(e),'</div>\n                    <div class="').concat(i,'-view-service-description">').concat(I(e.description),"</div>\n                </div>\n                <div>\n                    <button ").concat(o,'service-toggle="').concat(e.id,'">\n                        <span class="enable">').concat(I("Activer"),'</span>\n                        <span class="disable">').concat(I("Désactiver"),"</span>\n                    </button>  \n                </div>\n            </div>\n        ")}},{key:"getGroupMarkup",value:function(e,t){return'\n        <div class="'.concat(i,'-view-group">\n            <div class="').concat(i,"-view-group-head line ").concat(e.isMandatory()?"mandatory":"",'" ').concat(o,'group="').concat(e.id,'" ').concat(o,'status="').concat(e.status,'">\n                <div class="line-accept" ').concat(o,'group-toggle="').concat(e.id,'">\n                    <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n                        <use xlink:href="#valid"></use>\n                    </svg>\n                </div>\n                <div class="line-content">\n                    <div class="').concat(i,'-view-group-name">').concat(e.name).concat(this.getMandatoryText(e),'</div>\n                    <div class="').concat(i,'-view-group-description">').concat(e.description,'</div>\n                    <div class="').concat(i,'-view-group-detail">\n                        <a class="more" href="Javascript:void();" ').concat(o,'group-toggle-detail="').concat(e.id,'">Détail</a>  \n                    </div>\n                </div>\n                <div class="').concat(i,'-view-group-quick question">\n                    <button ').concat(o,'group-toggle="').concat(e.id,'">\n                        <span class="enable">').concat(I("Tout activer"),'</span>\n                        <span class="disable">').concat(I("Tout désactiver"),'</span>\n                    </button>\n                </div>\n            </div>\n\n            <div class="').concat(i,'-view-group-services">\n                ').concat(t.join(""),"\n            </div>\n        </div>\n        ")}},{key:"getMandatoryText",value:function(e){return e.isMandatory()?" <span class='mandatory-mention'>".concat(I("(nécessaire au fonctionnement du site)"),"</span>"):""}}])&&oe(n.prototype,r),a&&oe(n,a),u}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(c,e);var t,n,r,s,a=(t=c,function(){var e,n=ne(t);if(te()){var r=ne(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ee(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).css=t.getDefaultCssList(),t}return n=c,(r=[{key:"init",value:function(){Q(ne(c.prototype),"init",this).call(this),this.getCssList().map((function(e){return He.addCss(e)}))}},{key:"getDefaultCssList",value:function(){return[]}},{key:"getCssList",value:function(){return this.css}},{key:"setCssList",value:function(e){return this.css=e,this}},{key:"wrapper",value:function(e){return'\n        <div class="'.concat(i,'-view-wrapper">\n            <div class="').concat(i,'-view">\n                <span class="').concat(i,'-view-hide" ').concat(o,'view-hide>close</span>\n                <div class="').concat(i,'-view-content">\n                    ').concat(e,"\n                </div>\n            </div>\n        </div>")}},{key:"getNoServiceMarkup",value:function(){return this.wrapper('\n            <div class="'.concat(i,'-view-main">\n                <div class="title">').concat(I("Vos données personnelles"),'</div>\n                <div class="').concat(i,'-view-head">\n                    ').concat(I("Ce site ne déclare pas de services qui pourraient recquérir et exploiter des données personnelles."),"\n                </div>\n            </div>"))}},{key:"getContent",value:function(e){return'\n        <div class="'.concat(i,'-view-main">\n            <div class="title">').concat(I("Vos données personnelles"),'</div>\n            <div class="').concat(i,'-view-head">        \n                ').concat(I("Ce site utilise des services pour améliorer votre expérience utilisateur et vous proposer certains contenus externes. \n                Certains de ces services peuvent recquérir et exploiter des données personnelles. \n                Vous pouvez gérer leur activation via ce panneau accessible à tout moment.<br/>Vous pouvez également accéder et gérer en détail l'ensemble des services que le site propose."),'\n            </div>\n\n            <div class="').concat(i,'-view-quick">\n                <button ').concat(o,'all-enable="accept_all">').concat(I("Tout accepter"),"</button>\n                <button ").concat(o,'all-disable="deny_all">').concat(I("Tout refuser"),"</button>\n                <button ").concat(o,"view-toggle-detail>").concat(I("Voir le détail"),'</button>\n            </div>\n        </div>\n        <div class="').concat(i,'-view-detail">\n            ').concat(e,"\n        </div>")}},{key:"getViewMarkup",value:function(e){var t="";switch(e.type){case"groups":t=e.groups.join("");break;case"services":t=e.services.join("")}return this.wrapper(this.getContent(t))}},{key:"getServiceMarkup",value:function(e){return'\n            <div class="'.concat(i,'-view-service line"  ').concat(o,'service="').concat(e.id,'" ').concat(o,'status="').concat(e.status,'">\n                <div>\n                    <div class="').concat(i,'-view-service-name">').concat(I(e.name),'</div>\n                    <div class="').concat(i,'-view-service-description">').concat(I(e.description),'</div>\n                </div>\n                <div>\n                    <button data-egdpr-service-toggle="').concat(e.id,'">\n                        <span class="enable">').concat(I("Activer"),'</span>\n                        <span class="disable">').concat(I("Désactiver"),"</span>\n                    </button>  \n                </div>\n            </div>\n        ")}},{key:"getGroupMarkup",value:function(e,t){return'\n        <div class="'.concat(i,'-view-group">\n            <div class="').concat(i,'-view-group-head line" ').concat(o,'group="').concat(e.id,'" ').concat(o,'status="').concat(e.status,'">\n                <div>\n                    <div class="').concat(i,'-view-group-name">').concat(e.name," ").concat(e.isMandatory()?"<span class='mandatory'>".concat(I("(nécessaire au fonctionnement du site)"),"</span>"):"",'</div>\n                    <div class="').concat(i,'-view-group-description">').concat(e.description,'</div>\n                    <div class="').concat(i,'-view-group-detail">\n                        <a class="more" href="Javascript:void();" data-egdpr-group-toggle-detail="').concat(e.id,'">Detail</a>  \n                    </div>\n                </div>\n                <div class="').concat(i,'-view-group-quick question">\n                    <button data-egdpr-group-toggle="').concat(e.id,'">\n                        <span class="enable">').concat(I("Tout activer"),'</span>\n                        <span class="disable">').concat(I("Tout désactiver"),'</span>\n                    </button>\n                </div>\n            </div>\n\n            <div class="').concat(i,'-view-group-services">\n                ').concat(t.join(""),"\n            </div>\n        </div>\n        ")}},{key:"getUngroupedTitle",value:function(){return I("Autre")}},{key:"getShowPromise",value:function(){}},{key:"getHidePromise",value:function(){}}])&&K(n.prototype,r),s&&K(n,s),c}(U));function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ve={getNoServiceMarkup:function(){},getViewMarkup:function(){},getServiceMarkup:function(){},getGroupMarkup:function(){},init:function(){}},de=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeoutValue=200,this.rebuildTimeout=null,this.template=new le,this.needsRebuild("all")}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this;return this.setTemplate(this.template),He.on(w).subscribe((function(t){e.needsRebuild(t.data?t.data.type:"all",t.data?t.data.data:{})})),He.on(P).subscribe((function(t){return e.needsRebuild("service",t.data)})),He.on(E).subscribe((function(t){return e.needsRebuild("all",{})})),He.on(l).subscribe((function(t){return e.needsRebuild("group",t.data)})),He.on(u).subscribe((function(t){return e.needsRebuild("all",{})})),this}},{key:"needsRebuild",value:function(e,t){var n=this;switch(this._needsRebuildData=this._needsRebuildData||[],e){case"all":this.hasToRebuildAll()||(this._needsRebuildData=[{type:"all"}]);break;case"group":this.hasToRebuildGroup(t.group)&&this._needsRebuildData.push({type:"group",element:t.group});break;case"service":this.hasToRebuildService(t.service)&&this._needsRebuildData.push({type:"service",element:t.service})}return window.clearTimeout(this.rebuildTimeout),this.rebuildTimeout=window.setTimeout((function(){return n.rebuild()}),this.timeoutValue),this}},{key:"hasToRebuildAll",value:function(){return this._needsRebuildData&&this._needsRebuildData.filter((function(e){return"all"===e.type})).length>0}},{key:"hasToRebuildGroup",value:function(e){return!this.hasToRebuildAll()}},{key:"hasToRebuildService",value:function(e){return!this.hasToRebuildAll()}},{key:"getTemplate",value:function(){return this.template}},{key:"setTemplate",value:function(e){return c(ve,e,He.logsAreEnabled())&&(this.template=e,this.template.init(),He.trigger(w,{type:"all"})),this}},{key:"rebuild",value:function(){var e=this;return this._needsRebuildData&&this.view&&(this.hasToRebuildAll()?He.getServiceManager().getServicesList().length?this.view.innerHTML=this.getViewMarkup():this.view.innerHTML=this.template.getNoServiceMarkup():this._needsRebuildData.map((function(t){var n="";switch(t.type){case"service":n=e.template.getServiceMarkup(t.element);break;case"group":n=e.template.getGroupMarkup(t.element,e.getServicesMarkupList(t.element.getServicesList()))}var r="[".concat(o,"view-").concat(t.type,'="').concat(t.element.id,'"]');e.view.querySelectorAll(r).forEach((function(e){e.innerHTML=n}))})),He.trigger(m),this._needsRebuildData=null),this}},{key:"getViewElement",value:function(){return this.view||(this.view=document.createElement("div"),this.view.setAttribute(o+"view",""),this.rebuild()),this.view}},{key:"getViewMarkup",value:function(){var e=this.getContentMarkupFromData(this.getViewData());return this.template.getViewMarkup(e)}},{key:"getViewData",value:function(){var e={},t=He.getGroupManager(),n=He.getServiceManager(),r=t.getGroupsList();return r.length&&(e.type="group",e.data={},e.data.groups=r,e.data.ungrouped_services=t.getUnGroupedServices(),e.data.ungrouped_services.length!==n.getServicesList().length)||(e.type="services",e.data={},e.data.services=He.getServiceManager().getServicesList()),e}},{key:"getContentMarkupFromData",value:function(e){var t="";switch(e.type){case"group":t=this.getContentForGroupedView(e.data);break;case"services":t=this.getContentForServicesView(e.data);break;default:t=""}return t}},{key:"getContentForGroupedView",value:function(e){var t=this,n={type:"groups",groups:[]};return e.groups.map((function(e){n.groups.push(t.getGroupMarkup(e))})),e.ungrouped_services.length&&n.groups.push(this.getUngroupedMarkup(e.ungrouped_services)),n}},{key:"getContentForServicesView",value:function(e){return{type:"services",services:this.getServicesMarkupList(e.services)}}},{key:"getServicesMarkupList",value:function(e){var t=this;return e.map((function(e){return"<div ".concat(o,'view-service="').concat(e.id,'">').concat(t.template.getServiceMarkup(e),"</div>")}))}},{key:"getUngroupedMarkup",value:function(e){var t=He.createGroup("default",this.template.getUngroupedTitle(),"");return e.map((function(e){return t.addService(e)})),this.getGroupMarkup(t,this.getServicesMarkupList(e))}},{key:"getGroupMarkup",value:function(e){var t=e.getServicesList();if(t.length){var n=this.getServicesMarkupList(t);return"<div ".concat(o,'view-group="').concat(e.id,'">').concat(this.template.getGroupMarkup(e,n),"</div>")}return""}}])&&fe(t.prototype,n),r&&fe(t,r),e}());function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pe=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=de}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.view.init(),this.initBehaviors(),this.initActions()}},{key:"initActions",value:function(){var e=this;this.addAction("all-enable",(function(){He.getServiceManager().enableAll(),e.detailPanelIsOpen()||e.hide()})),this.addAction("all-disable",(function(){He.getServiceManager().disableAll(),e.detailPanelIsOpen()||e.hide()})),this.addAction("view-toggle-detail",(function(){return e.toggleDetailPanel()})),this.addAction("view-hide",(function(){return e.hide()})),this.addAction("view-show",(function(){return e.show()})),this.addAction("group-toggle-detail",(function(t){e.view.view.querySelector("[".concat(o,'view-group="').concat(t.elemId,'"]')).classList.toggle(i+"-detail")})),this.addAction("group-toggle",(function(e){e.group.toggleAll()})),this.addAction("service-enable",(function(e){He.getServiceManager().enableService(e.service)})),this.addAction("service-disable",(function(e){He.getServiceManager().disableService(e.service)})),this.addAction("service-toggle",(function(e){He.getServiceManager().toggleService(e.service)}))}},{key:"getView",value:function(){return this.view}},{key:"isDisplayed",value:function(){return document.querySelector("[".concat(o,"view]"))}},{key:"show",value:function(){var e=this;if(!this.isDisplayed()){this.body.append(this.view.getViewElement()),He.trigger(S,{});try{this.getView().getTemplate().getShowPromise().then((function(){e._doShow()}))}catch(e){this._doShow()}}}},{key:"_doShow",value:function(){this.body.classList.add(i+"-on")}},{key:"hide",value:function(){var e=this;if(this.isDisplayed()){He.testMode||He.getServiceManager().disableService(He.getServiceManager().getPendingServices()),He.trigger(k,{}),this.body.classList.remove(i+"-on"),this.body.classList.remove(i+"-detail"),this.body.querySelectorAll(".egdpr-detail").forEach((function(e){e.classList.remove(i+"-detail")}));try{this.getView().getTemplate().getHidePromise().then((function(){e._doHide()}))}catch(e){this._doHide()}}}},{key:"_doHide",value:function(){this.body.removeChild(this.view.getViewElement())}},{key:"addAction",value:function(e,t){this.actions=this.actions||[],this.actions[e]=this.actions[e]||[],this.actions[e].push(t)}},{key:"initBehaviors",value:function(e,t){var n=this;document.addEventListener("click",(function(e){e.path.map((function(e){for(var t,r=0,i=e.attributes,s=i?i.length:0;r<s;r++)if(0===(t=i[r]).nodeName.indexOf(o)){var a=t.nodeName.split("-"),c=a.slice(2).join("-");switch(a[2]){case"service":var u=He.getServiceManager().getServiceById(t.nodeValue);n.callAction(c,{service:u,elemId:t.nodeValue});break;case"group":var l=He.getGroupManager().getGroupById(t.nodeValue);n.callAction(c,{group:l,elemId:t.nodeValue});break;case"view":case"all":n.callAction(c,{})}}}))}))}},{key:"callAction",value:function(e,t){this.actions=this.actions||[],this.actions[e]=this.actions[e]||[],this.actions[e].map((function(e){e(t)}))}},{key:"toggleDetailPanel",value:function(){this.body.classList.toggle(i+"-detail")}},{key:"detailPanelIsOpen",value:function(){return this.body.classList.contains(i+"-detail")}},{key:"initDomData",value:function(){window.setTimeout((function(){document.querySelectorAll("[".concat(o,"service][").concat(o,"status]")).forEach((function(e){var t=He.getServiceManager().getServiceById(e.getAttribute(o+"service"));t&&e.setAttribute("".concat(o,"status"),t.status)})),document.querySelectorAll("[".concat(o,"group][").concat(o,"status]")).forEach((function(e){var t=He.getGroupManager().getGroupById(e.getAttribute(o+"group"));t&&e.setAttribute("".concat(o,"status"),t.status)}))}),10)}},{key:"body",get:function(){return this._body||(this._body=document.querySelector("body")),this._body}}])&&he(t.prototype,n),r&&he(t,r),e}()),ge=function(e,t){return(ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ye(e,t){function n(){this.constructor=e}ge(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function be(e){return"function"==typeof e}var we=!1,me={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;we=e},get useDeprecatedSynchronousErrorHandling(){return we}};function Se(e){setTimeout((function(){throw e}),0)}var ke={closed:!0,next:function(e){},error:function(e){if(me.useDeprecatedSynchronousErrorHandling)throw e;Se(e)},complete:function(){}},_e=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();var Oe=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Te=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n,r=this._parentOrParents,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var s=0;s<r.length;++s){r[s].remove(this)}if(be(i))try{i.call(this)}catch(e){t=e instanceof Oe?Me(e.errors):[e]}if(_e(o)){s=-1;for(var a=o.length;++s<a;){var c=o[s];if(null!==(n=c)&&"object"==typeof n)try{c.unsubscribe()}catch(e){t=t||[],e instanceof Oe?t=t.concat(Me(e.errors)):t.push(e)}}}if(t)throw new Oe(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function Me(e){return e.reduce((function(e,t){return e.concat(t instanceof Oe?t.errors:t)}),[])}var Ee=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Pe=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=ke;break;case 1:if(!n){o.destination=ke;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new je(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new je(o,n,r,i)}return o}return ye(t,e),t.prototype[Ee]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Te),je=function(e){function t(t,n,r,i){var o,s=e.call(this)||this;s._parentSubscriber=t;var a=s;return be(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==ke&&(be((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=o,s._error=r,s._complete=i,s}return ye(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;me.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=me.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Se(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Se(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};me.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),me.useDeprecatedSynchronousErrorHandling)throw e;Se(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!me.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return me.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Se(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Pe);var xe=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function De(){}function Le(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:De}var Ae=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof Pe)return e;if(e[Ee])return e[Ee]()}return e||t||n?new Pe(e,t,n):new Pe(ke)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||me.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),me.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){me.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof Pe?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Ce(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[xe]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Le(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Ce(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Ce(e){if(e||(e=me.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var Re=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),Ve=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return ye(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(Te),Ge=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return ye(t,e),t}(Pe),Ie=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return ye(t,e),t.prototype[Ee]=function(){return new Ge(this)},t.prototype.lift=function(e){var t=new ze(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new Re;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new Re;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Re;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new Re;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new Re;return this.hasError?(e.error(this.thrownError),Te.EMPTY):this.isStopped?(e.complete(),Te.EMPTY):(this.observers.push(e),new Ve(this,e))},t.prototype.asObservable=function(){var e=new Ae;return e.source=this,e},t.create=function(e,t){return new ze(e,t)},t}(Ae),ze=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return ye(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Te.EMPTY},t}(Ie);function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Be=n(2),He=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logs=!1,this.testMode=!1,this.autoShow=!0,this.observables=[],this.viewManager=pe,this.serviceManager=Z,this.groupManager=M,this.localManager=G,this.autoShowCallback=function(){(t.testMode||t.serviceManager.getPendingServices().length)&&t.showView()}}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this;return this.serviceManager.init(),this.groupManager.init(),this.viewManager.init(),this.localManager.init(),this.getServiceManager().getEnabledServicesList().map((function(t){e.getServiceManager().startService(t)})),this.autoShow&&(window.removeEventListener("DOMContentLoaded",this.autoShowCallback),window.addEventListener("DOMContentLoaded",this.autoShowCallback)),this.on(j).subscribe((function(t){return e.initDomData()})),this}},{key:"allowTryRegionalisation",value:function(){return this.localManager.allowTryRegionalisation(),this}},{key:"disableLogs",value:function(){return this.logs=!1,this}},{key:"logsAreEnabled",value:function(){return this.logs}},{key:"getServiceManager",value:function(){return this.serviceManager}},{key:"getGroupManager",value:function(){return this.groupManager}},{key:"getViewManager",value:function(){return this.viewManager}},{key:"getLocalManager",value:function(){return this.localManager}},{key:"disableAutoShow",value:function(){return this.autoShow=!1,window.removeEventListener("DOMContentLoaded",this.autoShowCallback),this}},{key:"trigger",value:function(e,t){return this.logs&&console.log("Trigger ".concat(e),t),this._observableIsDefined(e)&&this.observables[e].next({name:e,data:t}),this}},{key:"on",value:function(e){return this._observableIsDefined(e)||(this.observables[e]=new Ie),this.observables[e]}},{key:"_observableIsDefined",value:function(e){return this.observables&&this.observables[e]&&"function"==typeof this.observables[e].next}},{key:"createService",value:function(e){return this.serviceManager.createService(e)}},{key:"addService",value:function(e){return this.serviceManager.createService(e),this}},{key:"createGroup",value:function(e,t,n){return this.groupManager.createGroup(e,t,n)}},{key:"showView",value:function(){return this.viewManager.show(),this}},{key:"hideView",value:function(){return this.viewManager.hide(),this}},{key:"setTemplate",value:function(e){return this.viewManager.getView().setTemplate(e),this}},{key:"addScript",value:function(e,t){return Be(e,t),this}},{key:"removeScript",value:function(e){return document.querySelectorAll('script[src="'+e+'"]').forEach((function(e){return e.remove()})),this}},{key:"addCss",value:function(e,t){var n=document.querySelector("head"),r=document.createElement("link");return r.rel="stylesheet",r.type="text/css",r.href=e,r.media=t||"all",n.appendChild(r),this}},{key:"removeCss",value:function(e){return document.querySelectorAll('link[href="'+e+'"]').forEach((function(e){return e.remove()})),this}},{key:"initDomData",value:function(){return this.viewManager.initDomData(),this}},{key:"addTranslation",value:function(e){return this.getViewManager().getView().getTemplate().addTranslation(e),this}}])&&Ue(t.prototype,n),r&&Ue(t,r),e}());window[i]=window[i]||He;var qe=He,Ne=Y}]);